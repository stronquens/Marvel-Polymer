<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../util/rompe-cadena.html">
<link rel="import" href="./character-favorite.html">

<dom-module id="character-card">
	<template>
		<style>
			:host {
				display: flex;
			}
			paper-card {
				color: white;
				--paper-card-background-color: lightslategrey;
			}
			character-favorite{
				position: absolute;
    		top: 0px;
    		right: 0px;
			}
			.card-content p {
				font-size: .8em;
			}
			p{
				text-align: center;
			}
		</style>

       <!--  <paper-card heading="[[character.name]]"
				image="[[character.thumbnail.path]]/landscape_medium.[[character.thumbnail.extension]]">
            <div class="card-content">
                <h3>[[character.name]]</h3>
                <p>
                    <rompe-cadena
                    str="[[character.description]]"
                    len="50"
                    ></rompe-cadena>
                    <p hidden="[[character.description]]">Without description</p>
                </p>
            </div>
            <div class="card-actions">
                <paper-icon-button icon="star"></paper-icon-button>
								<character-favorite
									is-fav="[[isFav]]"
									on-tap="toggleFav"
									id="[[character.id]]"
								></character-favorite>
            </div>
        </paper-card> -->
				<paper-card class="character" id="[[character.id]]" image="[[character.thumbnail.path]]/landscape_xlarge.[[character.thumbnail.extension]]">
					<!--<img src="[[character.thumbnail.path]]/landscape_xlarge.[[character.thumbnail.extension]]" alt="[[character.name]"/> -->
					<p><rompe-cadena str="[[character.name]]"></rompe-cadena></p>
					<character-favorite
									is-fav="[[isFav]]"
									on-tap="toggleFav"
									id="[[character.id]]"
				  ></character-favorite>
				</paper-card>

	</template>

	<script>
    Polymer({
      is: 'character-card',
      properties: {
				character: Object,
				favoritos: Array,
				isFav: {
					type: Boolean,
					value: false
				}
      },
	  
      observers: [
        'definirFav(character, favoritos)'
      ],
      
      definirFav: function(character, favs) {
        if(favs.indexOf(character.id) == -1) {
          this.set('isFav',false)
        } else {
          this.set('isFav',true)
        }
      },
      toggleFav: function(e) {
        this.isFav = !this.isFav
        this.fire('toggle-fav', {
          isFav: this.isFav,
          id: this.character.id
        })
      }

    });
  </script>
</dom-module>